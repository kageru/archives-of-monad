<h2>{{ name }}<span class="type">{{ category }} {{ level }}</span></h2>
<hr/>
{% match rarity %}
{% when Some with (val) %}
<span class="trait rarity-{{ val.0|lower }}">{{ val.0 }}</span>
{% else %}
{% endmatch %}
{% for traitor in traits.clone() %}
<span class="trait">{{ traitor.name }}</span>
{% endfor %}

{% if !traditions.is_empty() %}
<div class="traditions">
    Traditions {% for tradition in traditions %}{% if loop.last %}{{tradition}}{% else %}{{tradition}}, {% endif %}{% endfor %}
</div>
{% endif %}

<div>
    Cast {{time}}{% if !cost.is_empty() %}; Cost {{cost}}{% endif %}{% if !secondary_casters.is_empty() %}; Secondary Casters {{secondary_casters}} {% endif %}
</div>

{% if !primary_check.is_empty() %}
<div>
    Primary Check {{primary_check}}{% if !secondary_check.is_empty() %}; Secondary Checks {{secondary_check}}{% endif %}
</div>
{% endif %}

<div>
    {% match area_string %}{% when Some with (val) %}Area {{val}}{% else %}{% match area %}{% when Area::None%}{% else %}{{area}}{% endmatch %}{% endmatch %}{% if !range.is_empty() %}; Range {{range}}{% endif %}{% if !target.is_empty() %}; Target {{target}}{% endif %}
</div>

{% if !duration.is_empty() %}
<div>Duration {{duration}}</div>
{% endif %}

{% match save %}
{% when Some with (val) %}
<div>Saving Throw {% if basic_save %}basic {% endif %}{{val}}</div>
{% else %}
{% endmatch %}

<p>{{ description }}</p>
<h3>Traits</h3>
<div>
    {% match rarity %}{% when Some with (val) %}
    <div class="trait-legend">
        <b>{{ val.0 }}</b>
        <p>{{ val.1 }}</p>
    </div>
    {% else %}{% endmatch %}
    {% for traitor in traits %}
    <div class="trait-legend">
        <b>{{ traitor.name }}</b>
        {% if loop.last %}<p style="border-bottom: none;">{{ traitor.description }}</p>
        {% else %}<p>{{ traitor.description }}</p>
        {% endif %}
    </div>
    {% endfor %}
</div>
